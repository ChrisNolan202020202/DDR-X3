CDImage = {
	["Boys"]= "01",
	["Butterfly"]= "02",
	["I Believe In Miracles (The Lisa Marie Experience Radio Edit)"]= "03",
	["Little Bitch"]= "04",
	["MAKE IT BETTER"]= "05",
	["PARANOiA"]= "06",
	["PARANOiA MAX～DIRTY MIX～"]= "07",
	["PARANOiA MAX~DIRTY MIX~ (in roulette)"]= "07",
	["PUT YOUR FAITH IN ME"]= "08",
	["AM-3P"]= "09",
	["stomp to my beat"]= "10",
	["TRIP MACHINE"]= "11",
	["EL RITMO TROPICAL"]= "12",
	["BRILLIANT 2U"]= "13",
	["BAD GIRLS"]= "14",
	["Boom Boom Dollar (Red Monster Mix)"]= "15",
	["DUB-I-DUB"]= "16",
	["SP-TRIP MACHINE~JUNGLE MIX~"]= "17",
	["Have You Never Been Mellow"]= "18",
	["KUNG FU FIGHTING"]= "19",
	["My Fire (UKS Remix)"]= "20",
	["LET'S GET DOWN"]= "21",
	["That's The Way (I Like It)"]= "22",
	["STRICTLY BUSINESS"]= "23",
	["PUT YOUR FAITH IN ME (Jazzy Groove)"]= "24",
	["BRILLIANT 2U(Orchestra Groove)"]= "25",
	["MAKE IT BETTER (So-REAL Mix)"]= "26",
	["HERO"]= "27",
	["GET UP'N MOVE"]= "28",
	["IF YOU WERE HERE"]= "29",
	["Smoke"]= "30",
	["TUBTHUMPING"]= "31",
	["LOVE"]= "32",
	["KEEP ON MOVIN'"]= "33",
	["LET THEM MOVE"]= "34",
	["20,NOVEMBER (D.D.R. version)"]= "35",
	["MAKE A JAM!"]= "36",
	["PARANOiA KCET ～clean mix～"]= "37",
	["XANADU"]= "38",
	["THE RACE"]= "39",
	["IN THE NAVY '99 (XXL Disaster Remix)"]= "40",
	["CAN'T TAKE MY EYES OFF YOU (70's REMIX)"]= "41",
	["CAN'T TAKE MY EYES OFF YOU"]= "41",
	["DO IT ALL NIGHT"]= "42",
	["FLASHDANCE (WHAT A FEELING)"]= "43",
	["GET UP AND DANCE"]= "44",
	["GET UP (BEFORE THE NIGHT IS OVER)"]= "45",
	["HOLIDAY"]= "46",
	["IF YOU CAN SAY GOODBYE"]= "47",
	["IT ONLY TAKES A MINUTE (Extended Remix)"]= "48",
	["MR. WONDERFUL"]= "49",
	["OH NICK PLEASE NOT SO QUICK"]= "50",
	["OPERATOR"]= "51",
	["ROCK BEAT"]= "52",
	["SO MANY MEN"]= "53",
	["TURN ME ON (HEAVENLY MIX)"]= "54",
	["UPSIDE DOWN"]= "55",
	["VOL.4"]= "56",
	["WONDERLAND (UKS MIX)"]= "57",
	["butterfly (UPSWING MIX)"]= "58",
	["CAPTAIN JACK (GRANDALE REMIX)"]= "59",
	["BOOM BOOM DOLLAR (K.O.G. G3 MIX)"]= "60",
	["AFRONOVA"]= "61",
	["END OF THE CENTURY"]= "62",
	["DAM DARIRAM"]= "63",
	["DYNAMITE RAVE"]= "64",
	["Silent Hill"]= "65",
	["DEAD END"]= "66",
	["La Señorita"]= "67",
	["LUV TO ME (AMD MIX)"]= "68",
	["Jam Jam Reggae"]= "69",
	["gentle stress (AMD SEXUAL MIX)"]= "70",
	["GRADIUSIC CYBER ～AMD G5 MIX～"]= "71",
	["PARANOiA Rebirth"]= "72",
	["FOLLOW THE SUN (90 IN THE SHADE MIX)"]= "73",
	["sorry"]= "74",
	["BUMBLE BEE"]= "75",
	["GIMME GIMME GIMME"]= "76",
	["AFTER THE GAME OF LOVE"]= "77",
	["CUTIE CHASER"]= "78",
	["DROP THE BOMB"]= "79",
	["LOVE THIS FEELIN'"]= "80",
	["La Senorita Virtual"]= "81",
	["La Señorita Virtual"]= "81",
	["think ya better D"]= "82",
	["TRIP MACHINE EVOLUTION"]= "83",
	["PARANOiA Revolution"]= "84",
};

CDTitles = {
	["TRIP MACHINE"]= "3",
	["Butterfly"]= "2",
	["Little Bitch"]= "0",
	["BAD GIRLS"]= "7",
	["Boom Boom Dollar (Red Monster Mix)"]= "8",
	["Boys"]= "6",
	["DUB-I-DUB"]= "9",
	["EL RITMO TROPICAL"]= "0",
	["GET UP'N MOVE"]= "10",
	["HERO"]= "9",
	["I Believe In Miracles (The Lisa Marie Experience Radio Edit)"]= "6",
	["IF YOU WERE HERE"]= "9",
	["LOVE"]= "6",
	["Smoke"]= "1",
	["stomp to my beat"]= "1",
	["TUBTHUMPING"]= "9",
	["think ya better D"]= "3",
	["TRIP MACHINE~luv mix~"]= "3",
	["AM-3P"]= "3",
	["BRILLIANT 2U"]= "3",
	["BRILLIANT 2U(Orchestra Groove)"]= "3",
	["MAKE IT BETTER (So-REAL Mix)"]= "3",
	["MAKE IT BETTER"]= "3",
	["PARANOiA"]= "3",
	["PARANOiA KCET ～clean mix～"]="3",
	["PARANOiA MAX~DIRTY MIX~"]= "3",
	["PARANOiA MAX~DIRTY MIX~ (in roulette)"]= "3",
	["PUT YOUR FAITH IN ME"]= "3",
	["PUT YOUR FAITH IN ME (Jazzy Groove)"]= "3",
	["SP-TRIP MACHINE~JUNGLE MIX~"]= "3",
	["KEEP ON MOVIN'"]= "3",
	["MAKE A JAM!"]= "3",
	["20,NOVEMBER (D.D.R. version)"]= "3",
	["LET THEM MOVE"]= "3",
	["LOVE THIS FEELIN'"]= "3",
	["THE RACE"]= "6",
	["IN THE NAVY '99 (XXL Disaster Remix)"]= "6",
	["TRIP MACHINE EVOLUTION"]= "3",
	["PARANOiA Revolution"]= "3",
};
--[[
Simple = 0
Moderate= 1
Ordinary= 2
Superior= 3
Marvelous= 4
Genuine= 5
Paramount= 6
Exorbitant= 7
Evolutionary= 8
Revolutionary= 9
]]

SongDiffTitleBasic = {
	["PARANOiA"]= "5",
	["TRIP MACHINE"]= "5",
	["Butterfly"]= "4",
	["Little Bitch"]= "5",
	["BAD GIRLS"]= "1",
	["Boom Boom Dollar (Red Monster Mix)"]= "1",
	["Boys"]= "2",
	["DUB-I-DUB"]= "3",
	["EL RITMO TROPICAL"]= "4",
	["GET UP'N MOVE"]= "4",
	["HERO"]= "3",
	["I Believe In Miracles (The Lisa Marie Experience Radio Edit)"]= "4",
	["IF YOU WERE HERE"]= "4",
	["LOVE"]= "2",
	["Smoke"]= "2",
	["stomp to my beat"]= "4",
	["TUBTHUMPING"]= "3",
	["think ya better D"]= "4",
	["TRIP MACHINE~luv mix~"]= "7",
	["AM-3P"]= "4",
	["BRILLIANT 2U"]= "3",
	["BRILLIANT 2U(Orchestra Groove)"]= "4",
	["MAKE IT BETTER"]= "3",
	["MAKE IT BETTER (So-REAL Mix)"]= "4",
	["PARANOiA KCET ～clean mix～"]="5",
	["PARANOiA MAX~DIRTY MIX~"]= "5",
	["PARANOiA MAX~DIRTY MIX~ (in roulette)"]= "5",
	["PUT YOUR FAITH IN ME"]= "2",
	["PUT YOUR FAITH IN ME (Jazzy Groove)"]= "3",
	["SP-TRIP MACHINE~JUNGLE MIX~"]= "5",
	["KEEP ON MOVIN'"]= "5",
	["MAKE A JAM!"]= "2",
	["20,NOVEMBER (D.D.R. version)"]= "6",
	["LET THEM MOVE"]= "0",
	["LOVE THIS FEELIN'"]= "7",
	["THE RACE"]= "39",
	["IN THE NAVY '99 (XXL Disaster Remix)"]= "7",
	["TRIP MACHINE EVOLUTION"]= "8",
	["PARANOiA Revolution"]= "9",
};

SongDiffTitleAnother = {
	["PARANOiA"]= "6",
	["TRIP MACHINE"]= "6",
	["Butterfly"]= "4",
	["Little Bitch"]= "5",
	["BAD GIRLS"]= "3",
	["Boom Boom Dollar (Red Monster Mix)"]= "4",
	["Boys"]= "3",
	["DUB-I-DUB"]= "5",
	["EL RITMO TROPICAL"]= "5",
	["GET UP'N MOVE"]= "6",
	["HERO"]= "4",
	["I Believe In Miracles (The Lisa Marie Experience Radio Edit)"]= "5",
	["IF YOU WERE HERE"]= "5",
	["LOVE"]= "4",
	["Smoke"]= "3",
	["stomp to my beat"]= "5",
	["TUBTHUMPING"]= "4",
	["think ya better D"]= "4",
	["TRIP MACHINE~luv mix~"]= "7",
	["AM-3P"]= "5",
	["BRILLIANT 2U"]= "4",
	["BRILLIANT 2U(Orchestra Groove)"]= "5",
	["MAKE IT BETTER"]= "4",
	["MAKE IT BETTER (So-REAL Mix)"]= "5",
	["PARANOiA KCET ～clean mix～"]="6",
	["PARANOiA MAX~DIRTY MIX~"]= "7",
	["PARANOiA MAX~DIRTY MIX~ (in roulette)"]= "6",
	["PUT YOUR FAITH IN ME"]= "3",
	["PUT YOUR FAITH IN ME (Jazzy Groove)"]= "5",
	["SP-TRIP MACHINE~JUNGLE MIX~"]= "6",
	["KEEP ON MOVIN'"]= "5",
	["MAKE A JAM!"]= "4",
	["20,NOVEMBER (D.D.R. version)"]= "6",
	["LET THEM MOVE"]= "1",
	["LOVE THIS FEELIN'"]= "7",
	["THE RACE"]= "39",
	["IN THE NAVY '99 (XXL Disaster Remix)"]= "7",
	["TRIP MACHINE EVOLUTION"]= "8",
	["PARANOiA Revolution"]= "9",
};

SongDiffTitleManiac = {
	["PARANOiA"]= "7",
	["TRIP MACHINE"]= "7",
	["Butterfly"]= "4",
	["Little Bitch"]= "5",
	["BAD GIRLS"]= "4",
	["Boom Boom Dollar (Red Monster Mix)"]= "5",
	["Boys"]= "6",
	["DUB-I-DUB"]= "7",
	["EL RITMO TROPICAL"]= "6",
	["GET UP'N MOVE"]= "7",
	["HERO"]= "5",
	["I Believe In Miracles (The Lisa Marie Experience Radio Edit)"]= "7",
	["IF YOU WERE HERE"]= "6",
	["LOVE"]= "6",
	["Smoke"]= "5",
	["stomp to my beat"]= "6",
	["TUBTHUMPING"]= "5",
	["think ya better D"]= "4",
	["TRIP MACHINE~luv mix~"]= "7",
	["AM-3P"]= "7",
	["BRILLIANT 2U"]= "5",
	["BRILLIANT 2U(Orchestra Groove)"]= "6",
	["MAKE IT BETTER"]= "6",
	["MAKE IT BETTER (So-REAL Mix)"]= "7",
	["PARANOiA KCET ～clean mix～"]="7",
	["PARANOiA MAX~DIRTY MIX~"]= "7",
	["PARANOiA MAX~DIRTY MIX~ (in roulette)"]= "7",
	["PUT YOUR FAITH IN ME"]= "5",
	["PUT YOUR FAITH IN ME (Jazzy Groove)"]= "5",
	["SP-TRIP MACHINE~JUNGLE MIX~"]= "7",
	["KEEP ON MOVIN'"]= "5",
	["MAKE A JAM!"]= "6",
	["20,NOVEMBER (D.D.R. version)"]= "6",
	["LET THEM MOVE"]= "6",
	["LOVE THIS FEELIN'"]= "7",
	["THE RACE"]= "39",
	["IN THE NAVY '99 (XXL Disaster Remix)"]= "7",
	["TRIP MACHINE EVOLUTION"]= "8",
	["PARANOiA Revolution"]= "9",
};

function Is2ndMIX()
	if GAMESTATE then
		local env = GAMESTATE:Env()
		if GAMESTATE:Env() then
			if not env.OLDMIX then
				return false
			end
			return true
		end
	end
	--the question is not yet meaningful if we get here
	return nil
end

--[[local outputPath = THEME:GetAbsolutePath("Other/SongManager 2ndMIX.txt", true)
local isolatePattern = "/([^/]+)/?$" --in English, "everything after the last forward slash unless there is a terminator"
local combineFormat = "%s/%s"
function AssembleStarter()
	if not (SONGMAN and GAMESTATE) then return end
	local set = {}
	local stepsType = GAMESTATE:GetCurrentStyle():GetStepsType()
	--populate the groups
	for _, song in pairs(SONGMAN:GetAllSongs()) do
		local beg = song:GetOneSteps(stepsType, 'Difficulty_Beginner')
		local easy = song:GetOneSteps(stepsType, 'Difficulty_Easy')
		if (beg and beg:GetMeter() < 4) or (easy and easy:GetMeter() < 4) then
			local shortSongDir = string.match(song:GetSongDir(),isolatePattern)
			local groupName = song:GetGroupName()
			local groupTbl = GetOrCreateChild(set, groupName)
			table.insert(groupTbl,
				string.format(combineFormat, groupName, shortSongDir))
		end
	end
	print("starter: "..#set)
	--sort all the groups and collect their names, then sort that too
	local groupNames = {}
	for groupName, group in pairs(set) do
		if next(group) == nil then
			set[groupName] = nil
		else
			table.sort(group)
			table.insert(groupNames, groupName)
		end
	end
	table.sort(groupNames)
	--then, let's make a representation of our eventual file in memory.
	local outputLines = {}
	for _, groupName in ipairs(groupNames) do
		table.insert(outputLines, "---"..groupName)
		for _, path in ipairs(set[groupName]) do
			table.insert(outputLines, path)
		end
	end
	--now, slam it all out to disk.
	local fHandle = RageFileUtil.CreateRageFile()
	--the mode is Write+FlushToDiskOnClose
	fHandle:Open(outputPath, 10)
	fHandle:Write(table.concat(outputLines,'\n'))
	fHandle:Close()
	fHandle:destroy()
end]]--

function Enable2ndMIXGameplayJunk()
	assert(GAMESTATE and GAMESTATE:Env(),
		"Wherever you are calling Enable2ndMIXGameplayJunk, you can't do it there!")
	local env = GAMESTATE:Env()
	env.OLDMIX = true
	SONGMAN:SetPreferredSongs("2ndMIX")
end

--if we've never made the file before, it complains
--this is enough to make it not complain
--[[if not FILEMAN:DoesFileExist(outputPath) then
	local fHandle = RageFileUtil.CreateRageFile()
	fHandle:Open(outputPath, 10)
	fHandle:Write("\n")
	fHandle:Close()
	fHandle:destroy()
	assert(FILEMAN:DoesFileExist(outputPath), "creating placeholder Starter preferred sort file failed")
end]]--
